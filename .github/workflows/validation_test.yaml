name: Validation Pipeline - test

# Workflow run name
run-name: Workflow run PR No - ${{ github.event.pull_request.number }} and PR title - ${{ github.event.pull_request.title }} by @${{ github.actor }}

on: 
  pull_request:
    types: [opened, synchronize]
    branches:
      - main
    paths-ignore:
      - "**/README.md"

jobs:
  validate_pr:
    runs-on: ubuntu-latest
    environment: CI
    env:
      GH_TOKEN: ${{secrets.GH_TOKEN}}
      SOURCE_BRANCH_NAME_1: ${{ vars.SOURCE_BRANCH_NAME_1 }}
      SOURCE_BRANCH_NAME_2: ${{ vars.SOURCE_BRANCH_NAME_2 }}

    if: (startsWith(github.head_ref, ${{ vars.SOURCE_BRANCH_NAME_1 }}) || startsWith(github.head_ref, ${{ vars.SOURCE_BRANCH_NAME_2 }}) && (github.event_name == 'pull_request') && contains('["Leandro-c-barbosa-alt"]', github.actor))
    steps:
      # Checkout acct-scripts repo
      - name: Checkout Python_Scripts
        uses: actions/checkout@v4
        with:
          repository: AlticeGroupIT/acct-scripts
          token: ${{ secrets.GH_TOKEN }}
          path: ./acct-scripts

      - name: Create Artifacts
        run: |
          ls -la > artifact1.txt
          ls > artifact2.txt
      
      - uses: actions/upload-artifact@v4
        name: Artfifact Upload - ./artifact1.txt
        with:
          name: artifact1.txt
          path: ./artifact1.txt

      - uses: actions/upload-artifact@v4
        name: Artfifact Upload - ./artifact2.txt
        with:
          name: artifact2.txt
          path: ./artifact2.txt
